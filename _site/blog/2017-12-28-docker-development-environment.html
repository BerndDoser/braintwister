<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>BrainTwister - Docker containers for software development</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">BrainTwister</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../products.html">
 <span class="menu-text">Products</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bernddoser"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.world/@braintwister"><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/bernddoser"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#docker-images" id="toc-docker-images" class="nav-link active" data-scroll-target="#docker-images">Docker images</a></li>
  <li><a href="#eclipse-ide" id="toc-eclipse-ide" class="nav-link" data-scroll-target="#eclipse-ide">Eclipse IDE</a>
  <ul class="collapse">
  <li><a href="#eclipse-ide-for-c-development" id="toc-eclipse-ide-for-c-development" class="nav-link" data-scroll-target="#eclipse-ide-for-c-development">Eclipse IDE for C++ development</a></li>
  </ul></li>
  <li><a href="#eclipse-ide-photon" id="toc-eclipse-ide-photon" class="nav-link" data-scroll-target="#eclipse-ide-photon">Eclipse IDE Photon</a>
  <ul class="collapse">
  <li><a href="#eclipse-ide-for-cuda-development" id="toc-eclipse-ide-for-cuda-development" class="nav-link" data-scroll-target="#eclipse-ide-for-cuda-development">Eclipse IDE for CUDA development</a></li>
  <li><a href="#eclipse-ide-for-embedded-development" id="toc-eclipse-ide-for-embedded-development" class="nav-link" data-scroll-target="#eclipse-ide-for-embedded-development">Eclipse IDE for embedded development</a></li>
  <li><a href="#persistent-storage" id="toc-persistent-storage" class="nav-link" data-scroll-target="#persistent-storage">Persistent storage</a></li>
  <li><a href="#project-assigned-development-environment" id="toc-project-assigned-development-environment" class="nav-link" data-scroll-target="#project-assigned-development-environment">Project-assigned development environment</a></li>
  </ul></li>
  <li><a href="#jenkins-build-container" id="toc-jenkins-build-container" class="nav-link" data-scroll-target="#jenkins-build-container">Jenkins build container</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Docker containers for software development</h1>
  <div class="quarto-categories">
    <div class="quarto-category">news</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Docker enables a great way for fast, small, reproducible, and portable software development environments.</p>
<p>The advantages are:</p>
<ul>
<li>Fast build and execution compared to virtual machines</li>
<li>Portability: Same environment on different machines, platforms, and operating systems</li>
<li>Reproducible behaviors</li>
<li>Economical consumption of resources</li>
<li>Identical environment for development IDE and continuous integration</li>
<li>Easy provisioning of images</li>
</ul>
<section id="docker-images" class="level2">
<h2 class="anchored" data-anchor-id="docker-images">Docker images</h2>
<p>Each directory correspond to an environment module. They can stick together as a chain:</p>
<p><code>module1</code> - <code>module2</code> - <code>module3</code> - <code>...</code></p>
<p>The image <code>module1-module2-module3</code> is using the image <code>module1-module2</code> as base, which will be set using the build-time variable <code>BASE_IMAGE</code>. For example the image <code>ubuntu-16.04-cmake-3.12</code> will be build with</p>
<p>{% highlight bash %} cd cmake-3.12 docker build -t braintwister/ubuntu-16.04-cmake-3.12 –build-arg BASE_IMAGE=braintwister/ubuntu-16.04 . {% endhighlight %}</p>
<p>Please find a list of available images at <a href="https://github.com/BrainTwister/docker-devel-env/blob/master/images.yml">images.yml</a>. The images in the list will be build automatically with <a href="https://jenkins.braintwister.eu/job/BrainTwister/job/docker-devel-env/">Jenkins</a> and pushed to <a href="https://hub.docker.com/u/braintwister/dashboard/">DockerHub</a>.</p>
<p>The docker images can be pulled with</p>
<p>{% highlight bash %} docker pull braintwister/<image-name> {% endhighlight %}</image-name></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="{{ site.url }}/images/docker-devel-env.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Docker scheme</figcaption><p></p>
</figure>
</div>
</section>
<section id="eclipse-ide" class="level2">
<h2 class="anchored" data-anchor-id="eclipse-ide">Eclipse IDE</h2>
<section id="eclipse-ide-for-c-development" class="level3">
<h3 class="anchored" data-anchor-id="eclipse-ide-for-c-development">Eclipse IDE for C++ development</h3>
<p>A ready-for-action eclipse IDE with</p>
<ul>
<li>CMake</li>
<li>GCC</li>
<li>conan.io</li>
<li>docker-engine</li>
</ul>
<p>installed can be started by</p>
<p>{% highlight bash %} docker run -d -v /tmp/.X11-unix:/tmp/.X11-unix:ro -e DISPLAY<br>
braintwister/ubuntu-16.04-cmake-3.12-gcc-7-conan-1.6-docker-18.06-eclipse-cpp-4.7.3 {% endhighlight %}</p>
<p>or using docker-compose by</p>
<p>{% highlight yaml %} version: “3” services:</p>
<p>eclipse: image: braintwister/ubuntu-16.04-cmake-3.12-gcc-7-conan-1.6-docker-18.03-eclipse-cpp-4.7.3 volumes: - /tmp/.X11-unix:/tmp/.X11-unix:ro environment: - DISPLAY privileged: true {% endhighlight %}</p>
<p>The mount of the X11 socket file (/tmp/.X11-unix) and the definition of the environment variable <code>DISPLAY</code> induce the application within the container to send the rendering instructions to the host X server. To allow the container to use the host display, the command <code>xhost +local:</code> must be executed on the host before starting the container. The privileged mode is needed for debugging with gdb.</p>
</section>
</section>
<section id="eclipse-ide-photon" class="level2">
<h2 class="anchored" data-anchor-id="eclipse-ide-photon">Eclipse IDE Photon</h2>
<p>Eclipse Photon can be started with the latest GCC compiler by</p>
<p>{% highlight bash %} docker run -d -v /tmp/.X11-unix:/tmp/.X11-unix:ro -e DISPLAY<br>
braintwister/ubuntu-18.04-cmake-3.12-gcc-8-conan-1.6-docker-18.06-eclipse-cpp-4.8 {% endhighlight %}</p>
<section id="eclipse-ide-for-cuda-development" class="level3">
<h3 class="anchored" data-anchor-id="eclipse-ide-for-cuda-development">Eclipse IDE for CUDA development</h3>
<p>First of all <a href="https://github.com/NVIDIA/nvidia-docker">nvidia-docker</a> version 2 must be installed and the runtime attribute must be set to <code>nvidia</code>, that the container get access to the host GPU card. The nvidia runtime attribute is currently only available at docker-compose version 2.3.</p>
<p>For CUDA development the NVIDIA IDE <a href="https://developer.nvidia.com/nsight-eclipse-edition">nsight</a> is highly recommended, because it provides special support for code editing, debugging, and profiling. The version of nsight is not adjustable, as it depends to the version of the cuda module.</p>
<p>{% highlight yaml %} version: “2.3” services:</p>
<p>eclipse: image: braintwister/ubuntu-16.04-cuda-9.2-cmake-3.12-gcc-7-conan-1.6-nsight runtime: nvidia volumes: - /tmp/.X11-unix:/tmp/.X11-unix:ro environment: - DISPLAY privileged: true {% endhighlight %}</p>
</section>
<section id="eclipse-ide-for-embedded-development" class="level3">
<h3 class="anchored" data-anchor-id="eclipse-ide-for-embedded-development">Eclipse IDE for embedded development</h3>
<p>To use the <a href="https://marketplace.eclipse.org/content/eclipse-c-ide-arduino">Eclipse CDT Arduino plugin</a> simply choose the eclipse-arduino module and bind the serial port of your Arduino connection (here: /dev/ttyACM0):</p>
<p>{% highlight yaml %} version: “3” services:</p>
<p>eclipse: image: braintwister/ubuntu-16.04-cmake-3.12-gcc-7-conan-1.6-docker-18.06-eclipse-arduino-4.7.3 volumes: - /tmp/.X11-unix:/tmp/.X11-unix:ro - /dev/ttyACM0:/dev/ttyACM0 environment: - DISPLAY privileged: true {% endhighlight %}</p>
</section>
<section id="persistent-storage" class="level3">
<h3 class="anchored" data-anchor-id="persistent-storage">Persistent storage</h3>
<p>The data in the container can be made persistent by using a <a href="https://docs.docker.com/storage/volumes/">docker volume</a> <code>home</code> for the home directory <code>/home/user</code>.</p>
<p>{% highlight yaml %} version: “3” services:</p>
<p>eclipse: image: braintwister/ubuntu-16.04-cmake-3.12-gcc-7-conan-1.6-docker-18.06-eclipse-cpp-4.7.3 volumes: - /tmp/.X11-unix:/tmp/.X11-unix:ro - home:/home/user environment: - DISPLAY privileged: true</p>
<p>volumes: home: {% endhighlight %}</p>
</section>
<section id="project-assigned-development-environment" class="level3">
<h3 class="anchored" data-anchor-id="project-assigned-development-environment">Project-assigned development environment</h3>
<p>The docker development environment can be directly stored within the source code repository and is able to bind the working directory of the source code into the development container. Therefore, the user in the container must be the owner of the source code working directory on the host. The user in the container can be set with the environment variables <code>USER_ID</code>, <code>GROUP_ID</code>, <code>USER_NAME</code>, and <code>GROUP_NAME</code>. In the following example the docker-compose file is stored in the root directory of a git repository. Starting <code>docker-compose up -d</code> in the root directory the current directory <code>.</code> will be bound to <code>/home/${USER_NAME}/git/${PROJECT}</code>. It is recommended to set the variables in an extra file <code>.env</code>, which is not controlled by the source control management, so that the docker-compose file must not be changed.</p>
<p>{% highlight yaml %} version: “3” services:</p>
<p>eclipse: image: braintwister/ubuntu-16.04-cmake-3.12-gcc-7-conan-1.6-docker-18.06-eclipse-cpp-4.7.3 volumes: - /tmp/.X11-unix:/tmp/.X11-unix:ro - home:/home/<span class="math inline">\({USER_NAME}  - .:/home/\)</span>{USER_NAME}/git/<span class="math inline">\({PROJECT}  environment:  - DISPLAY  - USER_ID=\)</span>{USER_ID} - GROUP_ID=<span class="math inline">\({GROUP_ID}  - USER_NAME=\)</span>{USER_NAME} - GROUP_NAME=${GROUP_NAME} privileged: true</p>
<p>volumes: home: {% endhighlight %}</p>
<p>The <code>.env</code>-file can be generated by</p>
<p>{% highlight bash %} cat &lt;&lt; EOT &gt; .env PROJECT=<code>basename "$PWD"</code> USER_ID=<code>id -u $USER</code> GROUP_ID=<code>id -g $USER</code> USER_NAME=<code>id -un $USER</code> GROUP_NAME=<code>id -gn $USER</code> EOT {% endhighlight %}</p>
</section>
</section>
<section id="jenkins-build-container" class="level2">
<h2 class="anchored" data-anchor-id="jenkins-build-container">Jenkins build container</h2>
<p>A declarative Jenkinsfile can look like</p>
<p>{% highlight groovy %} pipeline {</p>
<p>agent { docker { image ‘braintwister/ubuntu-16.04-cmake-3.12-clang-6-conan-1.6’ } }</p>
<p>stages { stage(‘Conan’) { steps { sh ‘conan install .’ } } stage(‘CMake’) { steps { sh ‘cmake .’ } } stage(‘Build’) { steps { sh ‘make all’ } } stage(‘Test’) { steps { sh ‘make test’ } } } } {% endhighlight %}</p>
<div class="row t60 b60">
<div class="small-12 text-center columns">
<pre><code>&lt;a class="button large radius alert" href="https://github.com/BrainTwister/docker-devel-env"&gt;Fork me on GitHub&lt;/a&gt; </code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>